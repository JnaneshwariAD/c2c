import{d as J,r,j as e,M as q,B as D,b as h,e as V,G as i,g as _,P as K,f as Q,h as X,i as Y,k as y,l as I,m as Z,I as S,E as $,D as ee,n as se,o as te,p as ae,q as T,F as re,A as oe,H as ne,J as ie,s as le,t as v}from"./index-D1P8NqU1.js";import{c as de,b as ce}from"./UpskillsCategoryApi-Cy63uQEA.js";const B=[{id:"moduleId",label:"ID"},{id:"moduleName",label:"Name",minWidth:100},{id:"description",label:"Description",minWidth:100},{id:"courseName",label:"Course Name",minWidth:150},{id:"createdBy",label:"Created By",align:"right"},{id:"updatedBy",label:"Updated By",align:"right"},{id:"insertedDate",label:"Inserted Date",align:"right"},{id:"updatedDate",label:"Updated Date",align:"right"},{id:"actions",label:"Actions",align:"right"}],xe=()=>{J();const[u,x]=r.useState(0),[l,k]=r.useState(10),[P,E]=r.useState([]),[p,g]=r.useState([]),[M,d]=r.useState(!1),[w,W]=r.useState(!1),[o,f]=r.useState({moduleName:"",description:"",courseId:""}),[n,j]=r.useState({}),[b,U]=r.useState(!1),A=(s,a)=>{x(a)},F=s=>{k(+s.target.value),x(0)},N={"Content-type":"application/json",Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("user")).accessToken},H=async()=>{try{const a=(await de(N)).data.content;if(a){const C=a.map(t=>({moduleId:t.moduleId,moduleName:t.moduleName,description:t.description,courseName:t.upskillCourseDToList&&t.upskillCourseDToList.length>0?t.upskillCourseDToList[0].courseName:"No Course Name",insertedDate:v(t.insertedDate).format("L"),updatedDate:v(t.updatedDate).format("L"),createdBy:t.createdBy?t.createdBy.userName:"No User",updatedBy:t.updatedBy?t.updatedBy.userName:"No User"}));g(C)}else g([])}catch(s){console.error("Error fetching modules:",s)}},L=async()=>{try{const a=(await ce(N)).data.content;if(a){const t=a.sort((c,G)=>c.courseName.localeCompare(G.courseName)).map(c=>({courseId:c.courseId,courseName:c.courseName}));E(t)}}catch(s){console.error("Error fetching courses:",s)}};r.useEffect(()=>{H(),L()},[b]);const R=()=>{const s={};return(!o.moduleName||o.moduleName.trim()==="")&&(s.moduleName="Enter the module name"),(!o.description||o.description.trim()==="")&&(s.description="Enter the description"),o.courseId||(s.courseId="Select a course"),s},m=s=>{f({...o,[s.target.name]:s.target.value}),j({...n,[s.target.name]:null})},z=()=>{W(!1),f({moduleName:"",description:"",courseId:""}),d(!0)},O=()=>{const s=R();Object.keys(s).length===0?(d(!1),U(!b)):j(s)};return e.jsxs(q,{title:e.jsxs(D,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"Upskills Modules"}),e.jsxs(h,{variant:"contained",color:"primary",sx:{display:"flex",alignItems:"center",fontSize:"15px"},onClick:z,children:["Add",e.jsx(V,{sx:{color:"#fff"}})]})]}),children:[e.jsx(i,{container:!0,spacing:_}),e.jsxs(K,{sx:{width:"100%",overflow:"hidden"},children:[e.jsx(Q,{sx:{maxHeight:440},children:e.jsxs(X,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(Y,{children:e.jsx(y,{children:B.map(s=>e.jsx(I,{align:s.align,style:{minWidth:s.minWidth,fontWeight:600,fontSize:15},children:s.label},s.id))})}),e.jsx(Z,{children:p.slice(u*l,u*l+l).map(s=>e.jsx(y,{hover:!0,role:"checkbox",tabIndex:-1,children:B.map(a=>e.jsx(I,{align:a.align,children:a.id==="actions"?e.jsxs(e.Fragment,{children:[e.jsx(S,{color:"primary",children:e.jsx($,{})}),e.jsx(S,{color:"error",children:e.jsx(ee,{})})]}):s[a.id]||"No Data"},a.id))},s.moduleId))})]})}),e.jsx(se,{rowsPerPageOptions:[10,25,100],component:"div",count:p.length,rowsPerPage:l,page:u,onPageChange:A,onRowsPerPageChange:F})]}),e.jsxs(te,{open:M,onClose:()=>d(!1),fullWidth:!0,maxWidth:"md",children:[e.jsx(ae,{sx:{fontSize:"16px"},children:w?"Edit Module":"Add Module"}),e.jsx(D,{component:"form",noValidate:!0,sx:{p:3},onSubmit:s=>{s.preventDefault(),O()},children:e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:12,children:e.jsx(T,{fullWidth:!0,label:"Module Name",name:"moduleName",value:o.moduleName,onChange:m,error:!!n.moduleName,helperText:n.moduleName})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(T,{fullWidth:!0,label:"Description",name:"description",value:o.description,onChange:m,error:!!n.description,helperText:n.description,multiline:!0,rows:3})}),e.jsx(i,{item:!0,xs:12,children:e.jsxs(re,{fullWidth:!0,error:!!n.courseId,children:[e.jsx(oe,{children:"Course"}),e.jsx(ne,{name:"courseId",value:o.courseId,onChange:m,children:P.map(s=>e.jsx(ie,{value:s.courseId,children:s.courseName},s.courseId))}),n.courseId&&e.jsx(FormHelperText,{children:n.courseId})]})})]})}),e.jsxs(le,{children:[e.jsx(h,{onClick:()=>d(!1),children:"Cancel"}),e.jsx(h,{type:"submit",variant:"contained",color:"primary",children:"Save"})]})]})]})};export{xe as default};
