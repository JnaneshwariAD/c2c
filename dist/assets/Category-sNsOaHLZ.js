import{d as H,r,j as e,M,B as C,b as x,e as O,G as c,g as G,P as L,f as q,h as J,i as V,k as D,l as B,m as _,I,E as K,D as Q,n as X,o as Y,p as Z,q as N,s as $,t as S}from"./index-D1P8NqU1.js";import{f as ee,a as te}from"./UpskillsCategoryApi-Cy63uQEA.js";const P=[{id:"categoryId",label:"ID"},{id:"categoryName",label:"Name",minWidth:100},{id:"description",label:"Description",minWidth:100},{id:"createdBy",label:"Created By",align:"right"},{id:"updatedBy",label:"Updated By",align:"right"},{id:"insertedDate",label:"Inserted Date",align:"right"},{id:"updatedDate",label:"Updated Date",align:"right"},{id:"actions",label:"Actions",align:"right"}],ie=()=>{H();const[l,y]=r.useState(0),[o,T]=r.useState(10),[u,p]=r.useState([]),[v,d]=r.useState(!1),[E,m]=r.useState(!1),[g,h]=r.useState({categoryName:"",description:""}),[n,k]=r.useState({}),[w,ae]=r.useState(!1),[re,W]=r.useState(null),A=(t,a)=>{y(a)},R=t=>{T(+t.target.value),y(0)},f=JSON.parse(sessionStorage.getItem("user")),j={"Content-type":"application/json",Authorization:"Bearer "+f.accessToken},U=async()=>{try{const a=(await ee(j)).data.content;if(a){const i=a.map(s=>({categoryId:s.categoryId,categoryName:s.categoryName,description:s.description,insertedDate:S(s.insertedDate).format("L"),updatedDate:S(s.updatedDate).format("L"),createdBy:s.createdBy?s.createdBy.userName:"No User",updatedBy:s.updatedBy?s.updatedBy.userName:"No User"}));p(i)}else p([])}catch(t){console.error("Error fetching data:",t)}};r.useEffect(()=>{U()},[w]);const b=t=>{h({...g,[t.target.name]:t.target.value,createdBy:{userId:f.userId}}),k({...n,[t.target.name]:null})},z=()=>{m(!1),h({categoryName:"",description:""}),d(!0)},F=async t=>{m(!0),d(!0);try{const a=await te(t,j),i=a.data;console.log(a),W(i.categoryId),h({categoryName:i.categoryName,description:i.description})}catch(a){console.error("Error fetching category details:",a)}};return e.jsxs(M,{title:e.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"Category"}),e.jsxs(x,{variant:"contained",color:"primary",sx:{display:"flex",alignItems:"center",fontSize:"15px"},onClick:z,children:["Add",e.jsx(O,{sx:{color:"#fff"}})]})]}),children:[e.jsx(c,{container:!0,spacing:G}),e.jsxs(L,{sx:{width:"100%",overflow:"hidden"},children:[e.jsx(q,{sx:{maxHeight:440},children:e.jsxs(J,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(V,{children:e.jsx(D,{children:P.map(t=>e.jsx(B,{align:t.align,style:{minWidth:t.minWidth,fontWeight:600,fontSize:15},children:t.label},t.id))})}),e.jsx(_,{children:u.slice(l*o,l*o+o).map(t=>e.jsx(D,{hover:!0,role:"checkbox",tabIndex:-1,children:P.map(a=>e.jsx(B,{align:a.align,children:a.id==="actions"?e.jsxs(e.Fragment,{children:[e.jsx(I,{onClick:()=>F(t.categoryId),color:"primary",children:e.jsx(K,{})}),e.jsx(I,{color:"error",children:e.jsx(Q,{})})]}):t[a.id]},a.id))},t.categoryId))})]})}),e.jsx(X,{rowsPerPageOptions:[10,25,100],component:"div",count:u.length,rowsPerPage:o,page:l,onPageChange:A,onRowsPerPageChange:R})]}),e.jsxs(Y,{open:v,onClose:()=>d(!1),fullWidth:!0,maxWidth:"md",children:[e.jsx(Z,{sx:{fontSize:"16px"},children:E?"Edit Category":"Add Category"}),e.jsxs(C,{component:"form",noValidate:!0,sx:{p:3},children:[e.jsxs(c,{container:!0,spacing:2,children:[e.jsx(c,{item:!0,xs:12,children:e.jsx(N,{fullWidth:!0,label:"Category Name",name:"categoryName",value:g.categoryName,onChange:b,error:!!n.categoryName,helperText:n.categoryName})}),e.jsx(c,{item:!0,xs:12,children:e.jsx(N,{fullWidth:!0,label:"Description",name:"description",value:g.description,onChange:b,error:!!n.description,helperText:n.description,multiline:!0,rows:3})})]}),e.jsxs($,{children:[e.jsx(x,{onClick:()=>d(!1),children:"Cancel"}),e.jsx(x,{type:"submit",variant:"contained",color:"primary",children:"Save"})]})]})]})]})};export{ie as default};
