import{d as J,r,j as e,M as q,B as y,b as h,e as K,G as l,g as _,P as Q,f as X,h as Y,i as Z,k as I,l as T,m as $,I as U,E as ee,D as te,n as ae,o as se,p as ie,q as p,F as re,A as oe,H as le,J as S,K as de,s as ne,t as C}from"./index-D1P8NqU1.js";import{d as ce,c as me}from"./UpskillsCategoryApi-Cy63uQEA.js";const B=[{id:"topicId",label:"ID"},{id:"topicName",label:"Name",minWidth:100},{id:"description",label:"Description",minWidth:100},{id:"moduleName",label:"Module",minWidth:150},{id:"videoUrl",label:"VideoUrl"},{id:"createdBy",label:"Created By",align:"right"},{id:"updatedBy",label:"Updated By",align:"right"},{id:"insertedDate",label:"Inserted Date",align:"right"},{id:"updatedDate",label:"Updated Date",align:"right"},{id:"actions",label:"Actions",align:"right"}],xe=()=>{J();const[u,x]=r.useState(0),[d,P]=r.useState(10),[g,f]=r.useState([]),[k,E]=r.useState([]),[M,n]=r.useState(!1),[w,W]=r.useState(!1),[i,j]=r.useState({topicName:"",description:"",moduleId:"",videoUrl:""}),[o,b]=r.useState({}),[v,A]=r.useState(!1),F=(t,s)=>{x(s)},H=t=>{P(+t.target.value),x(0)},N={"Content-type":"application/json",Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("user")).accessToken},R=async()=>{try{const s=(await ce(N)).data.content;if(console.log(s),s){const D=s.map(a=>({topicId:a.topicId,topicName:a.topicName,description:a.description,moduleName:a.upskillModuleDtoList?a.upskillModuleDtoList.moduleName:"No Module Name",videoUrl:a.videoUrl,insertedDate:C(a.insertedDate).format("L"),updatedDate:C(a.updatedDate).format("L"),createdBy:a.createdBy?a.createdBy.userName:"No User",updatedBy:a.updatedBy?a.updatedBy.userName:"No User"}));f(D)}else f([])}catch(t){console.error("Error fetching topics:",t)}},L=async()=>{try{const s=(await me(N)).data.content;if(s){const a=s.sort((m,G)=>m.moduleName.localeCompare(G.moduleName)).map(m=>({moduleId:m.moduleId,moduleName:m.moduleName}));E(a)}}catch(t){console.error("Error fetching modules:",t)}};r.useEffect(()=>{R(),L()},[v]);const z=()=>{const t={};return(!i.topicName||i.topicName.trim()==="")&&(t.topicName="Enter the topic name"),(!i.description||i.description.trim()==="")&&(t.description="Enter the description"),(!i.videoUrl||i.videoUrl.trim()==="")&&(t.videoUrl="Enter the videoUrl"),i.moduleId||(t.moduleId="Select a module"),t},c=t=>{j({...i,[t.target.name]:t.target.value}),b({...o,[t.target.name]:null})},O=()=>{W(!1),j({topicName:"",description:"",moduleId:"",videoUrl:""}),n(!0)},V=()=>{const t=z();Object.keys(t).length===0?(n(!1),A(!v)):b(t)};return e.jsxs(q,{title:e.jsxs(y,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"Upskills Topics"}),e.jsxs(h,{variant:"contained",color:"primary",sx:{display:"flex",alignItems:"center",fontSize:"15px"},onClick:O,children:["Add",e.jsx(K,{sx:{color:"#fff"}})]})]}),children:[e.jsx(l,{container:!0,spacing:_}),e.jsxs(Q,{sx:{width:"100%",overflow:"hidden"},children:[e.jsx(X,{sx:{maxHeight:440},children:e.jsxs(Y,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(Z,{children:e.jsx(I,{children:B.map(t=>e.jsx(T,{align:t.align,style:{minWidth:t.minWidth,fontWeight:600,fontSize:15},children:t.label},t.id))})}),e.jsx($,{children:g.slice(u*d,u*d+d).map(t=>e.jsx(I,{hover:!0,role:"checkbox",tabIndex:-1,children:B.map(s=>e.jsx(T,{align:s.align,children:s.id==="actions"?e.jsxs(e.Fragment,{children:[e.jsx(U,{color:"primary",children:e.jsx(ee,{})}),e.jsx(U,{color:"error",children:e.jsx(te,{})})]}):t[s.id]||"No Data"},s.id))},t.topicId))})]})}),e.jsx(ae,{rowsPerPageOptions:[10,25,100],component:"div",count:g.length,rowsPerPage:d,page:u,onPageChange:F,onRowsPerPageChange:H})]}),e.jsxs(se,{open:M,onClose:()=>n(!1),fullWidth:!0,maxWidth:"md",children:[e.jsx(ie,{sx:{fontSize:"16px"},children:w?"Edit Topic":"Add Topic"}),e.jsxs(y,{component:"form",noValidate:!0,sx:{p:3},onSubmit:t=>{t.preventDefault(),V()},children:[e.jsxs(l,{container:!0,spacing:2,children:[e.jsx(l,{item:!0,xs:12,children:e.jsx(p,{fullWidth:!0,label:"Topic Name",name:"topicName",value:i.topicName,onChange:c,error:!!o.topicName,helperText:o.topicName})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(p,{fullWidth:!0,label:"Description",name:"description",value:i.description,onChange:c,error:!!o.description,helperText:o.description,multiline:!0,rows:3})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(re,{fullWidth:!0,error:!!o.moduleId,children:[e.jsx(oe,{id:"module-select",children:"Module"}),e.jsxs(le,{labelId:"module-select",name:"moduleId",value:i.moduleId,onChange:c,children:[e.jsx(S,{value:"",children:e.jsx("em",{children:"None"})}),k.map(t=>e.jsx(S,{value:t.moduleId,children:t.moduleName},t.moduleId))]}),e.jsx(de,{children:o.moduleId})]})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(p,{fullWidth:!0,label:"VideoUrl ",name:"videoUrl",value:i.videoUrl,onChange:c,error:!!o.videoUrl,helperText:o.videoUrl})})]}),e.jsxs(ne,{children:[e.jsx(h,{onClick:()=>n(!1),children:"Cancel"}),e.jsx(h,{type:"submit",variant:"contained",color:"primary",children:"Save"})]})]})]})]})};export{xe as default};
