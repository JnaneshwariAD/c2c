import{v as F,c as H,d as M,r as s,j as e,M as G,B as I,b as g,e as O,G as x,g as L,P as $,f as q,h as J,i as V,k as B,l as C,m as _,I as D,E as K,D as Q,n as X,o as Y,p as Z,q as ee,s as ae,t as N}from"./index-D1P8NqU1.js";import{a as te}from"./RoleApi-BrO8wqZZ.js";const se=async(n,l)=>await F({method:"GET",url:`${H}/category/v1/getCategoryByCategoryId/{categoryId}?categoryId=${n}`,headers:l}),P=[{id:"roleId",label:"ID",align:"center"},{id:"roleName",label:"Name",align:"center"},{id:"createdBy",label:"Created By",align:"center"},{id:"updatedBy",label:"Updated By",align:"center"},{id:"insertedDate",label:"Inserted Date",align:"center"},{id:"updatedDate",label:"Updated Date",align:"center"},{id:"actions",label:"Actions",align:"center"}],ie=()=>{M();const[n,l]=s.useState(0),[i,S]=s.useState(10),[u,m]=s.useState([]),[T,d]=s.useState(!1),[p,f]=s.useState(!1),[y,c]=s.useState({roleName:"",description:""}),[h,R]=s.useState({}),[v,re]=s.useState(!1),[ne,E]=s.useState(null),w=(a,t)=>{l(t)},k=a=>{S(+a.target.value),l(0)},j=JSON.parse(sessionStorage.getItem("user")),b={"Content-type":"application/json",Authorization:"Bearer "+j.accessToken},U=async()=>{try{const t=(await te(b)).data.content;if(console.log(t),t){const o=t.map(r=>({roleId:r.roleId,roleName:r.roleName,insertedDate:N(r.insertedDate).format("L"),updatedDate:N(r.updatedDate).format("L"),createdBy:r.createdBy?r.createdBy.userName:"No User",updatedBy:r.updatedBy?r.updatedBy.userName:"No User"}));m(o)}else m([])}catch(a){console.error("Error fetching data:",a)}};s.useEffect(()=>{U()},[v]);const A=a=>{c({...y,[a.target.name]:a.target.value,createdBy:{userId:j.userId}}),R({...h,[a.target.name]:null})},W=()=>{f(!1),c({roleName:"",description:""}),d(!0)},z=async a=>{f(!0),d(!0);try{const o=(await se(a,b)).data;E(o.roleId),c({roleName:o.roleName,description:o.description})}catch(t){console.error("Error fetching role details:",t)}};return e.jsxs(G,{title:e.jsxs(I,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"Role"}),e.jsxs(g,{variant:"contained",color:"primary",sx:{display:"flex",alignItems:"center",fontSize:"15px"},onClick:W,children:["Add",e.jsx(O,{sx:{color:"#fff"}})]})]}),children:[e.jsx(x,{container:!0,spacing:L}),e.jsxs($,{sx:{width:"100%",overflow:"hidden"},children:[e.jsx(q,{sx:{maxHeight:440},children:e.jsxs(J,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(V,{children:e.jsx(B,{children:P.map(a=>e.jsx(C,{align:a.align,style:{minWidth:a.minWidth,fontWeight:600,fontSize:15},children:a.label},a.id))})}),e.jsx(_,{children:u.slice(n*i,n*i+i).map(a=>e.jsx(B,{hover:!0,role:"checkbox",tabIndex:-1,children:P.map(t=>e.jsx(C,{align:t.align,children:t.id==="actions"?e.jsxs(e.Fragment,{children:[e.jsx(D,{onClick:()=>z(a.roleId),color:"primary",children:e.jsx(K,{})}),e.jsx(D,{color:"error",children:e.jsx(Q,{})})]}):a[t.id]},t.id))},a.roleId))})]})}),e.jsx(X,{rowsPerPageOptions:[10,25,100],component:"div",count:u.length,rowsPerPage:i,page:n,onPageChange:w,onRowsPerPageChange:k})]}),e.jsxs(Y,{open:T,onClose:()=>d(!1),fullWidth:!0,maxWidth:"md",children:[e.jsx(Z,{sx:{fontSize:"16px"},children:p?"Edit Role":"Add Role"}),e.jsxs(I,{component:"form",noValidate:!0,sx:{p:3},children:[e.jsx(x,{container:!0,spacing:2,children:e.jsx(x,{item:!0,xs:12,children:e.jsx(ee,{fullWidth:!0,label:"Role Name",name:"roleName",value:y.roleName,onChange:A,error:!!h.roleName,helperText:h.roleName})})}),e.jsxs(ae,{children:[e.jsx(g,{onClick:()=>d(!1),children:"Cancel"}),e.jsx(g,{type:"submit",variant:"contained",color:"primary",children:p?"Update":"Save"})]})]})]})]})};export{ie as default};
